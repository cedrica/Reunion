<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

	<h:form id="creerRonde">
		<div class="row">
			<div class="col-md-2"></div>
			<div class="col-md-4">
				<div class="row form-inline pull-left" style="margin: 5px;">
					<h:inputText class="form-control input-large"
						id="debutDeLaRonde_dp" style="margin-right:5px;"
						a:placeholder="Debut de la ronde"
						value="#{rondeBean.ronde.debutDeLaRonde}">
						<f:convertDateTime pattern="dd/mm/yyyy" />
					</h:inputText>

					<h:inputText class="form-control input-large" id="finDeLaRonde_dp"
						a:placeholder="fin de la ronde"
						value="#{rondeBean.ronde.finDeLaRonde}">
						<f:convertDateTime pattern="dd/mm/yyyy" />
					</h:inputText>
				</div>
			</div>
			<div class="col-md-4"></div>
		</div>
		<div class="row">
			<div class="col-md-2"></div>
			<div class="col-md-6">
				<div class="form-group" style="margin: 5px;">
					<h:inputText class="form-control input-xlarge"
					value="#{rondeBean.search}" 
						a:placeholder="recherche dÂ´un membre">
						<f:ajax event="keyup" execute="foo" listener="#{rondeBean.filtre}" />
						 </h:inputText>
				</div>
			</div>
			<div class="col-md-4"></div>
		</div>
		<div class="row">
			<div class="col-md-2"></div>
			<div class="col-md-6" style="overflow: scroll; height: 400px;">
				<h:panelGroup id="foo">
					<c:forEach var="membre" items="#{rondeBean.listeDesMembres}">
						<div class="row form-inline">
							<div class="col-md-3">
								<h:selectBooleanCheckbox value="#{rondeBean.inserer}"
									id="cb_#{membre.id}_membre"
									style="margin-left:5px;margin-right:5px;">
									<f:ajax
										execute="cb_#{membre.id}_membre cb_#{membre.id}_membre_co cb_#{membre.id}_membre_dp"
										render="output" />
								</h:selectBooleanCheckbox>
								#{membre.nom} #{membre.prenom}
							</div>
							<h:inputText a:placeholder="cotisation"
								class="form-control input-small" id="ip_#{membre.id}_membre_co"
								required="true" requiredMessage="cotisation obligatiore"
								style="margin-left:5px;margin-right:5px;"
								value="#{membre.trafique.cotisation}" />
							<h:message for="ip_#{membre.id}_membre_co" style="color:red"
								id="ip_#{membre.id}_membre_coOut" />

							<h:inputText a:placeholder="Date de bouffe"
								id="ip_#{membre.id}_membre_dp"
								requiredMessage="Date de Bouffe obligatoire"
								class="form-control input-small" required="true"
								value="#{membre.trafique.dateDeBouffe}"
								style="margin-left:5px;margin-right:5px;">
								<f:convertDateTime pattern="dd/mm/yyyy" />
							</h:inputText>
							<h:message for="ip_#{membre.id}_membre_dp" style="color:red"
								id="ip_#{membre.id}_membre_dbOut" />

							<h:commandButton value="Ajouter" class="btn btn-primary"
								rendered="#{!membre.inserable}"
								action="#{rondeBean.ajouter(membre)}"
								id="ip_#{membre.id}_membre_btn">
								<f:ajax
									execute="cb_#{membre.id}_membre cb_#{membre.id}_membre_co cb_#{membre.id}_membre_dp ip_#{membre.id}_membre_En_btn"
									render="output" />
							</h:commandButton>
							<h:commandButton value="Enlever" class="btn btn-primary"
								rendered="#{membre.inserable}"
								id="ip_#{membre.id}_membre_En_btn">
								<f:ajax
									execute="cb_#{membre.id}_membre cb_#{membre.id}_membre_co cb_#{membre.id}_membre_dp"
									render="output" />
							</h:commandButton>

						</div>
						<br />
					</c:forEach>
				</h:panelGroup>

			</div>
			<div class="col-md-4">
				<div class="col-md-12">
					<h3>Liste des Membres selectioner</h3>
				</div>
				<h:selectOneListbox id="output">
					<f:selectItems value="#{rondeBean.membresDelaNouvelleRonde}"
						var="membre" itemLabel="#{membre.nom} #{membre.prenom}" />
				</h:selectOneListbox>
				<!-- 	<h:outputFormat  value="#{rondeBean.resultat}"
						id="output" /> -->

			</div>
		</div>
		<div class="row">
			<div class="col-md-4"></div>
			<div class="col-md-4 modal-footer">
				<h:commandButton value="Abbrechen" class="btn btn-default"
					immediate="true" action="#{rondeBean.setRondeCreable(false)}" />
				<h:commandButton value="Sauvegarder" class="btn btn-primary"
					action="#{rondeBean.creerUneRonde()}" />
			</div>
			<div class="col-md-4"></div>
		</div>
	</h:form>
</ui:composition>